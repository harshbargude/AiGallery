<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User DashBoard</title>
    <link href="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.css" rel="stylesheet" />
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.5.2/dist/flowbite.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.2.1/dist/flowbite.min.js"></script>
    <link rel="stylesheet" data-th-href="@{'/css/output.css'}">
</head>

<body class="bg-gray-100">
    <!-- Flowbite Navbar -->
    <nav class="bg-white border-gray-200 dark:bg-gray-900">
        <div class="max-w-screen-xl flex flex-wrap items-center justify-center mx-auto p-4">
            <!-- Brand -->
            <div class="max-w-screen-xl flex flex-wrap  mx-auto ">
                <div class="self-end">
                    <?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
                    <svg width="60px" class="dark:bg-transparent rounded-sm dark:fill-black" height="60px"
                        viewBox="0 0 48 48" xmlns="http://www.w3.org/2000/svg">
                        <defs>
                            <style>
                                .a {
                                    fill: none;
                                    stroke-linecap: round;
                                    stroke-linejoin: round;
                                }
                            </style>

                        </defs>
                        <path class="a dark:stroke-white stroke-gray-900"
                            d="M18.25,18.0882l9.9756,18.2505c.9561,1.7492,1.1131,3.1695-.8831,3.1726L6.3775,39.544c-1.35.0021-2.43-.8761-1.57-2.453L15.1757,18.0882C16.3223,15.9867,17.7365,17.1484,18.25,18.0882Z" />
                        <path class="a dark:stroke-white stroke-gray-900"
                            d="M25.0422,30.5142l6.5851-8.8282L43.5,39.4459l-16.1573.0654" />
                        <path class="a dark:stroke-white stroke-gray-900"
                            d="M16.5821,21.8168l-4.1865,9.3215,8.7.0654Z" />
                        <path class="a dark:stroke-white stroke-gray-900"
                            d="M8.8635,39.54,10.27,35.6846h12.494l2.0283,3.8307" />
                        <path class="a dark:stroke-white stroke-gray-900" d="M31.6273,21.686V39.4942" />
                        <path class="a dark:stroke-white stroke-gray-900" d="M35,26.731V39.48" />
                        <circle class="a dark:stroke-white stroke-gray-900" cx="32.1507" cy="12.5607" r="4.1047" />
                    </svg>
                </div>


                <!--            <span class="self-center text-2xl font-semibold whitespace-nowrap dark:text-white">Ai</span>-->
                <span class="self-center text-3xl font-normal font-sans whitespace-nowrap  dark:text-white">Gallery</span>


            </div>

            <div>
                <!-- Hamburger Menu Button (for mobile) -->
                <button data-collapse-toggle="navbar-default" type="button"
                    class="inline-flex items-center p-2 w-10 h-10 justify-center text-sm text-gray-500 rounded-lg md:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"
                    aria-controls="navbar-default" aria-expanded="false">
                    <span class="sr-only">Open main menu</span>
                    <svg class="w-5 h-5" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                        viewBox="0 0 17 14">
                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M1 1h15M1 7h15M1 13h15" />
                    </svg>
                </button>
            </div>


            <!-- Navbar Links -->
            <div class="hidden w-full md:block md:w-auto" id="navbar-default">
                <ul
                    class="font-medium flex md:gap-6 flex-col p-4 md:p-0 mt-4 border border-gray-100 rounded-lg bg-gray-50 md:flex-row md:space-x-8 rtl:space-x-reverse md:mt-0 md:border-0 md:bg-white dark:bg-gray-800 md:dark:bg-gray-900 dark:border-gray-700">
                    <!-- <li>
                        <a th:href="@{/user}" 
                           class="block py-2 px-3 text-white bg-blue-700 rounded md:bg-transparent md:text-blue-700 md:p-0 dark:text-white md:dark:text-blue-500" 
                           aria-current="page">Home</a>
                    </li> -->
                    <!-- Add more links if needed -->
                    <!-- <li>
                        <a href="#" class="block py-2 px-3 text-gray-900 rounded hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent">About</a>
                    </li> -->
                    <li class="sm:flex sm:flex-row flex flex-col items-center">
                        <span
                            class="w-full text-white bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-purple-300 dark:focus:ring-purple-800 shadow-lg shadow-purple-500/50 dark:shadow-lg dark:shadow-purple-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2"
                            th:text="'Logged in as, ' + ${user.email}">Welcome, User</span>
                        
                        <a th:href="@{/logout}"
                            class="text-white m-auto text-center bg-red-700 hover:bg-red-800 focus:outline-none focus:ring-4 focus:ring-red-300 font-medium rounded-full text-sm px-5 py-2.5 items-center me-2 mb-2 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-900">Logout</a>

                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <div class="container max-w-7xl mx-auto mt-6 px-4">
        <!-- Form Card -->
        <div class="bg-white p-6 rounded-lg shadow mb-6">
            <h2 class="text-xl font-semibold mb-4">Generate AI Image</h2>
            <form th:action="@{/aigallery/user/generate}" th:object="${imageRequest}" method="post" class="space-y-4">
                <div>
                    <label for="prompt" class="block text-sm font-medium text-gray-700">Prompt</label>
                    <input type="text" id="prompt" th:field="*{prompt}"
                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                        placeholder="e.g., A futuristic car in space" />
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div>
                        <label for="model" class="block text-sm font-medium text-gray-700">Model</label>
                        <select id="model" th:field="*{model}"
                            class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500">
                            <option value="flux">Flux</option>
                            <option value="turbo">Turbo</option>
                        </select>
                    </div>
                    <div>
                        <label for="seed" class="block text-sm font-medium text-gray-700">Seed (optional)</label>
                        <input type="number" id="seed" th:field="*{seed}"
                            class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" />
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <label for="dimensions" class="block text-sm font-medium text-gray-700">Select Dimensions</label>
                    <select id="dimensions"
                        class="mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"
                        onchange="updateDimensions()">

                        <!-- Standard Aspect Ratios & Resolutions -->
                        <optgroup label="ðŸ“ Standard Resolutions">
                            <option value="500x500">500 Ã— 500 (1:1 Square)</option>
                            <option value="1024x1024">1024 Ã— 1024 (1:1 Square)</option>
                            <option value="1280x1280">1280 x 1280 (1:1 Square)</option>
                            <option value="1280x720">1280 Ã— 720 (16:9 HD)</option>
                            <option value="1704x1704">1704 Ã— 1704 </option>
                            <option value="1024x768">1024 Ã— 768 (4:3 Traditional)</option>
                            <option value="1600Ã—1048">1568 Ã— 1048 </option>
                        </optgroup>

                        <!-- Social Media Image Sizes -->
                        <optgroup label="ðŸ“± Social Media Sizes">
                            <option value="320x320">320 Ã— 320 (Instagram Profile)</option>
                            <option value="1080x1080">1080 Ã— 1080 (Instagram Square Post)</option>
                            <option value="1080x1350">1080 Ã— 1350 (Instagram Portrait Post)</option>
                            <option value="1080x566">1080 Ã— 566 (Instagram Landscape Post)</option>
                            <option value="820x312">820 Ã— 312 (Facebook Cover Photo)</option>
                            <option value="170x170">170 Ã— 170 (Facebook Profile)</option>
                            <option value="1500x500">1500 Ã— 500 (Twitter Header)</option>
                            <option value="400x400">400 Ã— 400 (Twitter Profile)</option>
                            <option value="1280x720">1280 Ã— 720 (YouTube Thumbnail)</option>
                            <option value="1584x396">1584 Ã— 396 (LinkedIn Banner)</option>
                        </optgroup>

                    </select>
                </div>

                <!-- Hidden Inputs to Store Selected Values -->
                <input type="hidden" id="width" th:field="*{width}" />
                <input type="hidden" id="height" th:field="*{height}" />


                <button type="submit"
                    class="w-full text-white bg-gradient-to-r from-purple-500 via-purple-600 to-purple-700 hover:bg-gradient-to-br focus:ring-4 focus:outline-none focus:ring-purple-300 dark:focus:ring-purple-800 shadow-lg shadow-purple-500/50 dark:shadow-lg dark:shadow-purple-800/80 font-medium rounded-lg text-sm px-5 py-2.5 text-center me-2 mb-2">Generate
                    Image</button>
            </form>
        </div>

        <!-- Image Gallery -->
        <h3 class="text-lg font-semibold mb-4">Your Generated Images</h3>
        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-6">
            <div th:each="image : ${images}" class="image-card bg-white rounded-lg shadow overflow-hidden">
                <img th:src="${image.cloudinaryUrl}" class="w-full h-48 object-cover cursor-pointer"
                    alt="Generated Image" data-modal-target="image-details-modal"
                    data-modal-toggle="image-details-modal"
                    th:attr="data-prompt=${image.prompt}, data-model=${image.model}, data-width=${image.width}, data-height=${image.height}, data-image-url=${image.cloudinaryUrl}"
                    onclick="showImageDetails(this)" />

                <div class="p-4">
                    <p class="text-sm text-gray-600" th:text="${image.prompt}"></p>
                </div>

            </div>
        </div>
    </div>

    <!-- Image Details Modal -->
    <div id="image-details-modal" tabindex="-1" aria-hidden="true"
        class="hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full">
        <div class="relative p-4 w-full max-w-2xl max-h-full">
            <!-- Modal content -->
            <div class="relative bg-white rounded-lg shadow dark:bg-gray-700">
                <!-- Modal header -->
                <div
                    class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600 border-gray-200">
                    <h3 class="text-xl font-semibold text-gray-900 dark:text-white">
                        Image Details
                    </h3>
                    <button type="button"
                        class="text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
                        data-modal-hide="image-details-modal">
                        <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none"
                            viewBox="0 0 14 14">
                            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6" />
                        </svg>
                        <span class="sr-only">Close modal</span>
                    </button>
                </div>
                <!-- Modal body -->
                <div class="p-4 md:p-5 space-y-4">
                    <img id="modal-image" src="" class="w-full max-h-[50vh] object-contain" alt="Full-size Image" />
                    <div class="space-y-2">
                        <!-- <a th:href="${image.cloudinaryUrl+ '?fl_attachment'}" download >
                            <svg class="w-6 h-6 text-gray-800 dark:text-white" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 16 18">
                                <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 1v11m0 0 4-4m-4 4L4 8m11 4v3a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2v-3"/>
                            </svg>
                        </a> -->
                        <p class="text-base text-gray-500 dark:text-gray-400">
                            <strong>Prompt:</strong> <span id="modal-prompt"></span>
                        </p>
                        <p class="text-base text-gray-500 dark:text-gray-400">
                            <strong>Model:</strong> <span id="modal-model"></span>
                        </p>
                        <p class="text-base text-gray-500 dark:text-gray-400">
                            <strong>Width:</strong> <span id="modal-width"></span>
                        </p>
                        <p class="text-base text-gray-500 dark:text-gray-400">
                            <strong>Height:</strong> <span id="modal-height"></span>
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/flowbite@2.2.1/dist/flowbite.min.js"></script>
    <script data-th-src="@{/JS/viewImage.js}"></script>
</body>

</html>